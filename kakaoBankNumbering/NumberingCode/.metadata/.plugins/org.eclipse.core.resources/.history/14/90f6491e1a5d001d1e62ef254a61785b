<?xml version="1.0"?>

<project name = "Numbering" default="help" basedir=".">
	<target name="help">
		<echo message="Use ant -projecthelp for usage information." />
	</target>

	<!-- =================================================================== -->
	<!-- engine                                                              -->
	<!-- =================================================================== -->
	<target name="init.engine">
		<property name="build.dir.engine" value="../build/engine" />
		<property name="dist.dir.engine" value="../dist/engine" />
		<property name="war-file-name" value="${ant.project.name}.war" />
		<property name="web-xml-file" value="../src/main/webapp/WEB-INF/web.xml" />
		<property name="classes-directory" value="../build" />
		<property name="src.dir" value="../src/main/java" />
		<property name="lib.dir" value="../lib" />
		<property name="compile.debug" value="true" />
		<property name="compile.deprecation" value="false" />
		<property name="compile.optimize" value="true" />
		<property name="compile.encoding" value="euc-kr" />
		<path id="classpath.engine">
			<pathelement location="${lib.dir}/log4j-1.2-api-2.17.1.jar" />
			<pathelement location="${lib.dir}/log4j-api-2.17.1.jar" />
			<pathelement location="${lib.dir}/log4j-core-2.17.1.jar" />
			<pathelement location="${lib.dir}/servlet-api.jar" />
		</path>
	</target>

	<target name="compile.engine" depends="init.engine">
		<mkdir dir="${build.dir.engine}" />
		<javac srcdir="${src.dir}" destdir="${build.dir.engine}" deprecation="${compile.deprecation}" debug="${compile.debug}" optimize="${compile.optimize}" encoding="${compile.encoding}">
			<include name="engine/*.java" />
			<include name="logging/*.java" />
			<classpath refid="classpath.engine" />
		</javac>
	</target>

	<target name="clean.engine"  depends="init.engine">
		<delete dir="${build.dir.engine}" />
		<delete dir="${dist.dir.engine}" />
	</target>

	<target name="dist.engine"  depends="clean.engine, compile.engine">
		<mkdir dir="${dist.dir.engine}" />
		<war warfile="${dist.dir.engine}/${war-file-name}" webxml="${web-xml-file}"  basedir="${build.dir.engine}" >
			<classes dir="${classes-directory}"  />
			<manifest>
				<attribute name="Built-By" value="ChangHee_Kim" />
				<attribute name="Main-Class" value="engine.Version" />
				<attribute name="Sealed" value="false" />
			</manifest>
		</war>
	</target>
</project>
